# Руководство по загрузке сайта на сервер с помощью **GIT** и **PuTTY**

### После подключения к серверу смотрим файлы командой `ls` или файлы и папки `ls -la`

### Клонируем репозиторий на наш сайт перейдя в нужный каталог `cd site.ru`
```
git clone https://github.com/govorov-top/project.git nameFolder
```
### Копируем все из папки `nameFolder` в корень сайта
Перед клонированием выполняем команду, чтобы файлы начинающиеся с точки, например `.htaccess` тоже копировались
```
shopt -s dotglob
```
Далее копируем из все из папки `nameFolder` в корень сайта `site.ru`
```
cp -rdfp ~/site.ru/nameFolder/* ~/site.ru/
```

### Копируем все из папки `public` в папку `public_html`
```
cp -rdfp ~/site.ru/public/* ~/site.ru/public_html/
```
### Удаляем лишние папки
```
rm -R public nameFolder
```

### Для установки нужной версии PHP узнаем доступные версии командой
```
whereis php
```

#### Создаём файл c alias:
```
touch .bash_profile
```

#### Запускаем редактирование файла:
```
nano .bash_profile
```

#### Вставляем следующие alias:
Путь берем из `whereis php`
```
alias composer='/usr/local/bin/php8.0 ~/composer/composer.phar'
alias php='/usr/local/bin/php8.0'
```
Сохраняем и перезаходим в Putty

## Далее уже идет работа с проектом, это может быть как Larvel так и WordPress

#### Проваливаемся в наш проект и устанавливаем все необходимое:
```
composer install
```

## Laravel
#### Создаем `.env`:
Данная команда копирует файл `.env.example` и переименовывает в `.env`
```
cp .env.example .env
```

#### Открываем и редактируем (Можно уже просто открывать файл на сервере):
```
nano .env
```

#### Генерируем ключ:
```
php artisan key:generate
```

#### Запускаем миграции и фабрики:
```
php artisan migrate:refresh --seed
```

#### После всех этих настроек мы просто работаем со своим проектом на локальной машине, пушим все в git, после чего возвращаемся в Putty и выполняем следующие команды для загрузки изменений на сервер
```
cd site.ru
```
```
git pull
```

## WordPress
```
touch .gitignore
nano .gitignore
```
```
wp-config.php
.idea
```
```
git init
git add .
git commit -m "first commit"
git remote add origin git@github.com:govorov-top/project.git
git push -u origin master
```
# КОНЕЦ!

## P.S. полезные команды

`man [имя команды]` - выдаст подробную информацию по команде, например: `man mv` Для выхода из `man`, т.е. из руководства по команде, нажмите `q`.

`[имя команды] --help` - также позволит посмотреть описание команды.

`ls` - вывести список файлов.

`ls -la` - покажет все файлы (включая скрытые), размер файлов, владельца и группу владельца, права на них, дату последнего изменения.

`ls -lha` - то же, что предыдущая команда, только размер файлов будет показан в удобном виде.

`ls -lha | less` - позволит просматривать файлы постранично (если их много).

`cd [имя директории]` - переход в выбранную директорию.

`cd ../` - переход на директорию выше.

`cd ~` - переход в корневую директорию.

`mv` - переименовать и/или переместить.

`rm` - удалить.

`cp` - копировать.

`&gt.` - очистка файла. Например, можно применить к файлам логов ( &gt. access.log, &gt. error.log, &gt. combined.log).

`mc` - запуск Midnight Commander - что-то вроде Norton Commander, в котором удобно работать с файлами, а также возможно работать с ними по sftp (ftp внутри ssh).

`chmod` - установка прав на файл или директорию.

`cat` -объединяет файл или несколько файлов, либо ввод со стандартного устройства ввода и выводит результат на стандартное устройство вывода.

`cat [имя файла]` - выведет на экран содержимое файла.

`cat [имя файла] | grep [искомая строка]` - выведет на экран строки файла, включающие искомую строку.

`mkdir [имя директории]` - создание директории (папки).